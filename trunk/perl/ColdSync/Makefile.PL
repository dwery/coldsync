use ExtUtils::MakeMaker;
# See lib/ExtUtils/MakeMaker.pm for details of how to influence
# the contents of the Makefile that is written.

# XXX - This should probably read the values of the variables
# generated by 'configure'. Careful with this: Perl already knows
# where it wants to be installed. Presumably the main thing to watch
# out for is if a plain user wants to install this in his home
# directory. Set PREFIX, maybe? See "CONFIGURE => ...".

# XXX - 'make clean' shouldn't delete Makefile

WriteMakefile(
    'NAME'		=> 'ColdSync',
# XXX - Get version from somewhere else, e.g., 'configure'?
    'VERSION_FROM'	=> 'ColdSync.pm', # finds $VERSION
    'INSTALLDIRS'	=> 'site',

    # Don't build
    'dist'		=> {
		'DIST_DEFAULT'	=> 'distdir',
	},
);

# Additional rules to make things work properly with the rest of the
# ColdSync distribution.
# XXX - Get the proper version and everything
sub MY::postamble {
	'
TOP =		../..
SUBDIR =	perl/ColdSync

include ../../Make.rules

DISTVNAME =	${DISTDIR}

distfiles-core::	distdir

spotless::	distclean
	${RM_F} errs.* *.bak
';
}
